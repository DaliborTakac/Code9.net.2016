<!DOCTYPE html>
<html>
<head>
    <title>WebAPI test page</title>
	<meta charset="utf-8" />
    <script type="text/javascript" src="Scripts/jquery-1.10.2.js"></script>
    <style type="text/css">
        .form-input {
            float: left;
            clear: left;
            border: 1px solid #c3c3c3;
            padding: 8px;
        }
        .form-input > label,
        .form-input > input,
        .form-input > select {
            width: 250px;
            display: inline-block;
        }
        #response {
            border: 1px solid #c3c3c3;
        }
    </style>
</head>
<body>
    <form action="" method="post">
        <div class="form-input">
            <label for="method">Request method</label>
            <select id="method">
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
            </select>
        </div>
        <div class="form-input">
            <label for="url">API endpoint</label>
            <select id="url">
                <option value="api/menu">/api/menu</option>
                <option value="api/orders">/api/orders</option>
            </select>
            <span>/</span>
            <input type="text" id="url-extra" />
        </div>
        <div class="form-input">
            <label for="query">Query parameters</label>
            <input type="text" id="query" />
        </div>
        <div style="overflow: hidden; clear: left">
            <div style="width: 50%; float: left;">
                <textarea style="width: 100%; height: 450px; resize:vertical" id="data"></textarea>
            </div>
            <div style="width: 40%; float: left; padding: 0 5%">
                <div id="response" style="overflow-y: scroll; width: 80%; height: 450px;"></div>
            </div>
        </div>
        <div>
            <input type="submit" id="submit" />
        </div>
    </form>
    <script type="text/javascript">
        $(function () {

            var method = $("#method");
            var url = $("#url");
            var urlExtra = $("#url-extra");
            var query = $("#query");
            var data = $("#data");
            var response = $("#response");

            $("#submit").on("click", function (evt) {
                evt.preventDefault();
                var q = query.val();
                var endpoint = url.val();
                var extra = urlExtra.val();
                if (extra) {
                    endpoint += "/" + extra;
                }
                if (q) {
                    endpoint += "?" + q;
                }
                $.ajax({
                    url: endpoint,
                    method: method.val(),
                    contentType: "application/json",
                    data: data.val(),
                    processData: false,
                    success: function (data) {
                        if (data) {
                            response.append($("<pre>" + JSON.stringify(data, null, "  ") + "</pre>"))
                        } else {
                            response.append($("<p>Success</p>"));
                        }
                    },
                    error: function (xhr, status, error) {
                        response.append($("<p style=\"color: red\">" + status + " : " + error + "</p>"));
                    }
                })
            });

        });
    </script>
</body>
</html>
